.user_new
  = form_for [:admin, @user], html: { class: 'form-horizontal' } do |f|
    -if @user.errors.any?
      #error_explanation
        %ul.unstyled.alert.alert-danger
          - @user.errors.full_messages.each do |msg|
            %li= msg

    %fieldset
      %legend= t('account', scope: 'layouts.nav.profile')
      .form-group
        = f.label :name, class: 'control-label'
        .col-sm-10
          = f.text_field :name, required: true, autocomplete: "off", class: 'form-control'
          %span.help-inline * #{t('general.required').downcase}
      .form-group
        = f.label :username, class: 'control-label'
        .col-sm-10
          = f.text_field :username, required: true, autocomplete: "off", class: 'form-control'
          %span.help-inline * #{t('general.required').downcase}
      .form-group
        = f.label :email, class: 'control-label'
        .col-sm-10
          = f.text_field :email, required: true, autocomplete: "off", class: 'form-control'
          %span.help-inline * #{t('general.required').downcase}

    - if @user.new_record?
      %fieldset
        %legend= t('password', scope: 'devise.sessions.new_base')
        .form-group
          = f.label :password, class: 'control-label'
          .col-sm-10
            %strong
              = t('.a_temporary_password_will_be_generated')
              %br
              = t('.user_will_be_forced_to_change')
    - else
      %fieldset
        %legend= t('password', scope: 'devise.sessions.new_base')
        .form-group
          = f.label :password, class: 'control-label'
          .col-sm-10= f.password_field :password, disabled: f.object.force_random_password, class: 'form-control'
        .form-group
          = f.label :password_confirmation, class: 'control-label'
          .col-sm-10= f.password_field :password_confirmation, disabled: f.object.force_random_password, class: 'form-control'

    %fieldset
      %legend= t('access', scope: 'activerecord.attributes.snippet')
      .form-group
        = f.label :projects_limit, class: 'control-label'
        .col-sm-10= f.number_field :projects_limit, class: 'form-control'

      .form-group
        = f.label :can_create_group, class: 'control-label'
        .col-sm-10= f.check_box :can_create_group

      .form-group
        = f.label :admin, class: 'control-label'
        - if current_user == @user
          .col-sm-10= f.check_box :admin, disabled: true
          .col-sm-10= t('.you_cannot_remove_your_own_admin_rights')
        - else
          .col-sm-10= f.check_box :admin
      - unless @user.new_record? || current_user == @user
        .alert.alert-danger
          - if @user.blocked?
            %p= t('.this_user_is_blocked')
            = link_to t('.unblock_user'), unblock_admin_user_path(@user), method: :put, class: "btn btn-small"
          - else
            %p= t('.blocked_users_will_be_removed_from_projects')
            = link_to t('.block_user'), block_admin_user_path(@user), data: {confirm: t('user_will_be_blocked', scope: 'admin.users.index')}, method: :put, class: "btn btn-small btn-remove"
    %fieldset
      %legend= t('profile', scope: 'layouts.profile')
      .form-group
        = f.label :skype, class: 'control-label'
        .col-sm-10= f.text_field :skype, class: 'form-control'
      .form-group
        = f.label :linkedin, class: 'control-label'
        .col-sm-10= f.text_field :linkedin, class: 'form-control'
      .form-group
        = f.label :twitter, class: 'control-label'
        .col-sm-10= f.text_field :twitter, class: 'form-control'
      .form-group
        = f.label :website_url, User.human_attribute_name('website_url'), class: 'control-label'
        .col-sm-10= f.text_field :website_url, class: 'form-control'

    .form-actions
      - if @user.new_record?
        = f.submit t('.create_user'), class: "btn btn-create"
        = link_to t('general.cancel'), admin_users_path, class: "btn btn-cancel"
      - else
        = f.submit t('general.save_changes'), class: "btn btn-save"
        = link_to t('general.cancel'), admin_user_path(@user), class: "btn btn-cancel"
