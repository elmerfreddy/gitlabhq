- show_roles = should_user_see_group_roles?(current_user, @group)
%h3.page-title
  = t('.group_members')
- if show_roles
  %p.light
    = t('.members_have_access_all_projects')
    = t('.read_more_about_permissions')
    %strong= link_to t('general.here'), help_permissions_path, class: "vlink"

%hr

.clearfix.js-toggle-container
  = form_tag members_group_path(@group), method: :get, class: 'form-inline member-search-form'  do
    .form-group
      = search_field_tag :search, params[:search], { placeholder: t('.find_member_by_name'), class: 'form-control search-text-input input-mn-300' }
    = submit_tag t('general.search'), class: 'btn'

  - if current_user && current_user.can?(:manage_group, @group)
    .pull-right
      = link_to '#', class: 'btn btn-new js-toggle-button' do
        = t('.add_members')
        %i.icon-chevron-down

    .js-toggle-content.hide.new-group-member-holder
      = render "new_group_member"

.ui-box.prepend-top-20
  .title
    %strong #{@group.name}
    = t('group_members', scope: 'projects.team_members.group_members')
    %small
      (#{@members.total_count})
  %ul.well-list
    - @members.each do |member|
      = render 'users_groups/users_group', member: member, show_roles: show_roles, show_controls: true
= paginate @members, theme: 'gitlab'

:coffeescript
  $('form.member-search-form').on 'submit', (event) ->
    event.preventDefault()
    Turbolinks.visit @.action + '?' + $(@).serialize()
