%h3.page-title
  = @snippet.new_record? ? t('.new_snippet') : t('.edit_snippet', snippet: @snippet.id)
%hr
.snippet-form-holder
  = form_for @snippet, as: :personal_snippet, url: url, html: { class: "form-horizontal snippet-form" } do |f|
    -if @snippet.errors.any?
      .alert.alert-danger
        %ul
          - @snippet.errors.full_messages.each do |msg|
            %li= msg

    .form-group
      = f.label :title, Snippet.human_attribute_name('title'), class: 'control-label'
      .col-sm-10= f.text_field :title, placeholder: t('.example_snippet'), class: 'form-control', required: true
    .form-group
      = f.label "Access", Snippet.human_attribute_name('access'), class: 'control-label'
      .col-sm-10
        = f.label :private_true, class: 'radio-label' do
          = f.radio_button :private, true
          %span
            %strong= t('general.private')
            (#{t('.only_you_can_see_this_snippet')})
        %br
        = f.label :private_false, class: 'radio-label' do
          = f.radio_button :private, false
          %span
            %strong= t('general.public')
            (#{t('.gitlab_users_can_see_this_snippet')})

    .form-group
      .file-editor
        = f.label :file_name, Snippet.human_attribute_name('file'), class: 'control-label'
        .col-sm-10
          .file-holder.snippet
            .file-title
              = f.text_field :file_name, placeholder: t('general.example_rb'), class: 'form-control snippet-file-name', required: true
            .file-content.code
              %pre#editor= @snippet.content
              = f.hidden_field :content, class: 'snippet-file-content'

    .form-actions
      - if @snippet.new_record?
        = f.submit t('.create_snippet'), class: "btn-create btn"
      - else
        = f.submit t('general.save'), class: "btn-save btn"

      - unless @snippet.new_record?
        .pull-right.prepend-left-20
          = link_to t('general.remove'), snippet_path(@snippet), data: { confirm: t('.are_you_sure') }, method: :delete, class: "btn btn-remove delete-snippet", id: "destroy_snippet_#{@snippet.id}"
      = link_to t('general.cancel'), snippets_path(@project), class: "btn btn-cancel"


:javascript
  var editor = ace.edit("editor");
  $(".snippet-form-holder form").submit(function(){
    $(".snippet-file-content").val(editor.getValue());
  });

